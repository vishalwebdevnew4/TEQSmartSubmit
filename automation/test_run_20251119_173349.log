üöÄ Starting automation...
   URL: https://www.seoily.com/contact-us
   Fields to fill: 0
üìÑ Loading page...
‚úÖ Page loaded
üîß Fixing zoom and positioning...
üîç Checking for overlay banners, cookie consent, and modals...
   ‚ÑπÔ∏è  No overlays found or already closed
üîç Waiting for form fields to load...
   ‚ö†Ô∏è  Form fields not found immediately, continuing...
üîç Discovering forms on page...
‚úÖ Found 2 form(s)
   üìã Selected form with 20 fields (score: 5)
üìù Found 20 fields in target form
ü§ñ Auto-detect mode enabled: Automatically detecting form fields...
   ‚ö†Ô∏è  No fields detected by type matching, using fallback: filling ANY text/textarea fields (ignoring visibility check)
   üîç Fallback: Found field - tag: input, type: text, name: full_name, selector: input[name="full_name"]
   üîç Fallback: Found field - tag: input, type: text, name: company, selector: input[name="company"]
   üîç Fallback: Found field - tag: input, type: text, name: phone, selector: input[name="phone"]
   üîç Fallback: Found field - tag: input, type: email, name: email, selector: input[name="email"]
   üîç Fallback: Found field - tag: input, type: text, name: subject, selector: input[name="subject"]
   üîç Fallback: Found field - tag: textarea, type: textarea, name: message, selector: textarea[name="message"]
   üîç Fallback: Found field - tag: input, type: text, name: full_name, selector: input[name="full_name"]
   üîç Fallback: Found field - tag: input, type: text, name: company, selector: input[name="company"]
   üîç Fallback: Found field - tag: input, type: text, name: phone, selector: input[name="phone"]
   üîç Fallback: Found field - tag: input, type: email, name: email, selector: input[name="email"]
   üîç Fallback: Found field - tag: input, type: text, name: subject, selector: input[name="subject"]
   üîç Fallback: Found field - tag: textarea, type: textarea, name: message, selector: textarea[name="message"]
   ‚úÖ Fallback: Found 5 visible text/textarea fields to fill
   ‚úÖ Auto-detected 5 fields: full_name, company, phone, email, subject
‚úçÔ∏è  Filling 5 form fields...
   Field 1/5: input[name="full_name"]...
Traceback (most recent call last):
  File "test_headless_local.py", line 89, in test_submission
    result = await run_submission(TEST_URL, template_path)
  File "/var/www/html/TEQSmartSubmit/automation/./run_submission.py", line 1534, in run_submission
    raise RuntimeError(error_msg)
RuntimeError: Failed to fill field: input[name="full_name"]
Field not found in discovered fields. Tried: input[name="full_name"], input[name='full_name']
Last error: Page.wait_for_selector: Timeout 15000ms exceeded.
Call log:
waiting for locator("input[name='full_name']") to be visible
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>


================================================================================
TEQSmartSubmit Local Headless Mode Test
================================================================================
Server: teqtop-OptiPlex-3050
Python: 3.8.10 (default, Mar 18 2025, 20:04:55) 
[GCC 9.4.0]
Working Directory: /var/www/html/TEQSmartSubmit/automation
================================================================================

================================================================================
Local Headless Mode Test - Environment Check
================================================================================
DISPLAY environment variable: NOT SET (simulating remote server)
Has display: False
TEQ_FORCE_HEADLESS: true
HEADLESS: NOT SET

Expected browser mode: HEADLESS MODE (forced)
================================================================================

================================================================================
Testing Form Submission in Headless Mode
================================================================================
URL: https://www.seoily.com/contact-us
Template headless: True
================================================================================

üöÄ Starting automation in HEADLESS mode...

================================================================================

‚ùå EXCEPTION: Failed to fill field: input[name="full_name"]
Field not found in discovered fields. Tried: input[name="full_name"], input[name='full_name']
Last error: Page.wait_for_selector: Timeout 15000ms exceeded.
Call log:
waiting for locator("input[name='full_name']") to be visible
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>
  -   locator resolved to 2 elements. Proceeding with the first one: <input type="text" required="" id="full-name" name="full_name"/>


Troubleshooting:
1. Ensure Playwright is installed: pip install playwright && playwright install chromium
2. Check Python dependencies
3. Verify network connectivity to the target URL

================================================================================
Test Complete
================================================================================
